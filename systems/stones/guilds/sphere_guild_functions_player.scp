//****************************************************************************
// SPHERE by : Menasoft ï¿½1997-2023
// www.sphereserver.net
//****************************************************************************
// FILE LAST UPDATED: 26.10.2023
//
VERSION=0.56T

[PLEVEL 1]
gc

[FUNCTION gc]
IF !(<DEF0.GUILDCFGSPEECH_GLOBAL_ENABLE>)
    RETURN 1
ELSEIF !(<GUILD>)
    RETURN 1
ENDIF
LOCAL.PRIVSPEECH = <GUILD.MEMBERFROMUID.<UID>.PRIV>
IF (<LOCAL.PRIVSPEECH> == <DEF.STONEPRIV_ACCEPTED>)
    LOCAL.PRIVSPEECH = <DEF.STONEPRIV_CANDIDATE>
ENDIF
IF ((<LOCAL.PRIVSPEECH> == <DEF.STONEPRIV_CANDIDATE>) && !<DEF0.GUILDCFGSPEECH_ENABLE_CANDIDATES>)
    RETURN 1
ELSEIF ((<LOCAL.PRIVSPEECH> == <DEF.STONEPRIV_MEMBER>) && !<DEF0.GUILDCFGSPEECH_ENABLE_MEMBERS>)
    RETURN 1
ENDIF
IF (<CTAG0.GUILDSYS_LASTGUILDMSG_TIME> < <SERV.TIME>)
    CTAG.GUILDSYS_LASTGUILDMSG_TIME = <SERV.TIME> + <DEF0.GUILDCFGSPEECH_SPAM_INTERVAL>
    F_GUILDSYS_SPEECH_SENDSMSG <GUILD.UID>,<ARGS>
ENDIF


[FUNCTION F_USERGUILDBUTTON]
IF !(<DEF0.GUILDCONFIG_USEGUILDBUTTON>)
    RETURN 1
ELSEIF !(<GUILD>)
    RETURN 1
ENDIF
IF ((<GUILD.MEMBERFROMUID.<UID>.PRIV>==<DEF0.STONEPRIV_MEMBER>)||(<GUILD.MASTERUID>==<UID>))
    TRYSRC <UID> GUILD.SDIALOG D_GUILD_MAIN,0
ENDIF

[EOF]